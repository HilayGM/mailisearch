<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>busqueda de peliculas</title>
</head>
<body>
    <h1>Busca tu pelicula</h1>
    <input type="text" id="searchQuery" placeholder="Escribe tu búsqueda">
  <button onclick="performSearch()">Buscar</button>
  <div id="results"></div>

  <script>
        async function performSearch() {
      const query = document.getElementById('searchQuery').value;
      if (!query) {
        alert('Por favor, ingresa un término de búsqueda.');
        return;
      }

      try {
        const response = await fetch('http://localhost:3000/search', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ query }),
        });

        if (!response.ok) {
          throw new Error('Error al realizar la búsqueda');
        }

        const data = await response.json();//esto combierte lo json de la peticion a un js
        displayResults(data.hits);
      } catch (error) {
        console.error('Error:', error);
        document.getElementById('results').innerText = 'Error al realizar la búsqueda.';
      }
    }
    function verResultados(results){
        const resultDiv = document.getElementById('results');
        resultDiv.innerHTML = '';
        if (results.length === 0){
            resultDiv.innerHTML = '<p>No se encontraron resultados.</p>';
            return;
        }
        results
    }
  </script>
</body>
</html>